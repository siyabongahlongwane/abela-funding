<mat-progress-spinner [mode]="'indeterminate'" *ngIf="loading$ | async"></mat-progress-spinner>
<div class="horizontal-center-center">
    <div class="vertical-start-stretch full-width">
        <div class="horizontal-space-between-stretch">
            <div></div>
            <mat-icon class="pointer red-color" (click)="dialogRef.close()">close</mat-icon>
          </div>
          <div class="vertical-start-stretch gap-1em">
              <h1 class="primary-color center-text bold">{{ data.header }}</h1>
              <small>Enter the email associated with your account</small>
                <form [formGroup]="emailForm">
                    <div class="vertical-start-stretch gap-1em">
                        <div class="vertical-start-stretch grey-input-container">
                            <mat-form-field appearance="outline">
                                <input matInput formControlName="email" placeholder="Enter Email"
                                    type="email">
                                <mat-error *ngIf="emailForm.get('email')?.hasError('required')">
                                    Email is <b>required!</b>
                                </mat-error>
                                <mat-error *ngIf="emailForm.get('email')?.hasError('pattern')">
                                    Email is <b>invalid!</b>
                                </mat-error>
                                <mat-icon matPrefix>email</mat-icon>
                            </mat-form-field>
                        </div>

                        <div *ngIf="data.action === 'reset'" class="vertical-start-stretch grey-input-container">
                            <mat-form-field appearance="outline">
                                <input matInput formControlName="currentPassword" placeholder="Current Password"
                                    [type]="showCurrentPass ? 'text' : 'password'">
                                <mat-error *ngIf="emailForm.get('currentPassword')?.hasError('required')">
                                    Current Password is <b>required!</b>
                                </mat-error>
                                <mat-icon matPrefix>lock</mat-icon>
                                <mat-icon (click)="showCurrentPass = !showCurrentPass" matSuffix>{{ showCurrentPass ? 'visibility_off' :
                                    'visibility_on' }}</mat-icon>
                            </mat-form-field>
                        </div>

                        <div *ngIf="data.action === 'reset'" class="vertical-start-stretch grey-input-container">
                            <mat-form-field appearance="outline">
                                <input matInput formControlName="password" placeholder="Enter New Password"
                                    [type]="showPass ? 'text' : 'password'">
                                <mat-error *ngIf="emailForm.get('password')?.hasError('required')">
                                    New Password is <b>required!</b>
                                </mat-error>
                                <mat-icon matPrefix>lock</mat-icon>
                                <mat-icon (click)="showPass = !showPass" matSuffix>{{ showPass ? 'visibility_off' :
                                    'visibility_on' }}</mat-icon>
                            </mat-form-field>
                        </div>
                        <div class="vertical-center-center">
                            <button (click)="data.action === 'reset' ? resetPassword(emailForm) : submitForm(emailForm)" class="primary-bg white-color border-radius-2em"
                                mat-raised-button>Submit</button>
                        </div>
                    </div>
                </form>

            </div>

    </div>
</div>